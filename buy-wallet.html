<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Crossflag — Wallet</title>
  <style>
    /* (твой оригинальный CSS без изменений) */
  </style>
</head>
<body>
  <!-- (твой оригинальный HTML без изменений, КРОМЕ input ниже) -->

  <!-- Найди input с id="walletInput" и замени ТОЛЬКО ЕГО на этот: -->
  <!--
  <input class="input" id="walletInput" placeholder="" autocomplete="off" inputmode="text" />
  -->
  <!-- ✅ станет: -->
  <input class="input" id="walletInput" placeholder="" autocomplete="off" inputmode="text"
         enterkeyhint="done" autocapitalize="off" spellcheck="false" />

  <!-- (дальше твой оригинальный HTML) -->

  <script>
    // (твой оригинальный JS остаётся)

    // ✅ ДОБАВЬ В САМЫЙ КОНЕЦ СУЩЕСТВУЮЩЕГО <script> (перед </script>)
    (function(){
      const tg = window.Telegram && window.Telegram.WebApp ? window.Telegram.WebApp : null;
      const inp = document.getElementById('walletInput');
      if (!inp) return;

      // 1) "Done" / Enter закрывает клавиатуру
      inp.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          inp.blur();
        }
      });

      // 2) тап по пустому месту закрывает клавиатуру
      const blurIfOutside = (e) => {
        const t = e.target;
        if (t && t !== inp) {
          inp.blur();
        }
      };
      document.addEventListener('touchstart', blurIfOutside, { passive:true });
      document.addEventListener('mousedown', blurIfOutside);

      // 3) Telegram MainButton "Готово" (не твой дизайн, а UI Telegram)
      let bound = false;

      const showDone = () => {
        if (!tg || !tg.MainButton) return;
        try {
          tg.MainButton.setText('Готово');
          tg.MainButton.show();
          if (!bound) {
            bound = true;
            tg.MainButton.onClick(() => {
              inp.blur();
            });
          }
        } catch(e){}
      };

      const hideDone = () => {
        if (!tg || !tg.MainButton) return;
        try { tg.MainButton.hide(); } catch(e){}
      };

      inp.addEventListener('focus', showDone);
      inp.addEventListener('blur', hideDone);

      // если страница открылась сразу с фокусом
      if (document.activeElement === inp) showDone();
    })();
  </script>
</body>
</html>
